<div class="employe-navbar">
  <div class="title">Projets</div>
  <div class="search">
    <input type="text" name="search" placeholder="Entrez un mot cl√© du projet" (keyup)="applyFilter($event)">
  </div>
  <div class="actions">
    <button (click)="downloadCsv()">Export</button>

  </div>

  </div>
  <mat-sidenav-container class="container">
    <!-- Menu lat√©ral -->
    <mat-sidenav mode="side" opened>
      <mat-toolbar style="color: #2196f3;">Projets</mat-toolbar>
      <mat-list>
        <mat-list-item *ngFor="let projet of projets" (click)="selectProjet(projet)">
          <mat-icon>folder</mat-icon>
          <span>{{ projet.nom_du_projet }}</span>
        </mat-list-item>
      </mat-list>
    </mat-sidenav>

    <!-- D√©tails du projet -->
    <mat-sidenav-content class="content">
      <mat-card *ngIf="selectedProjet" class="card">
        <mat-card-title>{{ selectedProjet.nom_du_projet }}</mat-card-title>
        <mat-card-subtitle>Statut : {{ selectedProjet.statut }}</mat-card-subtitle>

        <mat-divider></mat-divider>

        <mat-card-content>
          <!-- üîπ Infos g√©n√©rales du projet -->
          <h3>Informations g√©n√©rales</h3>
          <div class="info"><mat-icon>code</mat-icon> <span>Code : {{ selectedProjet.code_projet }}</span></div>
          <div class="info"><mat-icon>calendar_today</mat-icon> <span>Date pr√©vue : {{ selectedProjet.date_prevu | date: 'dd/MM/yyyy' }}</span></div>
          <div class="info"><mat-icon>date_range</mat-icon> <span>Date d√©but : {{ selectedProjet.date_debut | date: 'dd/MM/yyyy' }}</span></div>
          <div class="info"><mat-icon>event</mat-icon> <span>Date fin : {{ selectedProjet.date_fin | date: 'dd/MM/yyyy' }}</span></div>
          <div class="info"><mat-icon>attach_money</mat-icon> <span>Montant Soumission : {{ selectedProjet.montant_soumission }}</span></div>

          <mat-divider></mat-divider>

          <!-- üîπ D√©tails du Projet -->
          <h3>D√©tails du projet</h3>
          <p>{{ selectedProjet.detail }}</p>

          <mat-divider></mat-divider>

          <!-- üîπ Suivi & √âtat du Projet -->
          <h3>Suivi & √âtat</h3>
          <div class="info"><mat-icon>visibility</mat-icon> <span>Suivi : {{ selectedProjet.suivi }}</span></div>
          <div class="info"><mat-icon>check_circle</mat-icon> <span>Code √©tat : {{ selectedProjet.code_etat_proet }}</span></div>
          <div class="info"><mat-icon>info</mat-icon> <span>D√©tails √©tat : {{ selectedProjet.detail_etat_projet }}</span></div>

          <mat-divider></mat-divider>

          <!-- üîπ D√©tails du Client -->
          <h3>Client</h3>
          <ng-container *ngIf="selectedClient; else loadingClient">
            <div class="info"><mat-icon>business</mat-icon> <span>{{ selectedClient.nom }}</span></div>
            <div class="info"><mat-icon>location_on</mat-icon> <span>{{ selectedClient.adresse }}</span></div>
            <div class="info"><mat-icon>phone</mat-icon> <span>{{ selectedClient.telephone }}</span></div>
            <div class="info"><mat-icon>language</mat-icon> <a [href]="selectedClient.site_web" target="_blank">Site Web</a></div>
          </ng-container>
          <ng-template #loadingClient><p>Chargement des infos client...</p></ng-template>

          <mat-divider></mat-divider>

          <!-- üîπ D√©tails de l'Employ√© -->
          <h3>Employ√© Responsable</h3>
          <ng-container *ngIf="selectedEmploye; else loadingEmploye">
            <div class="info"><mat-icon>person</mat-icon> <span>{{ selectedEmploye.nom }} {{ selectedEmploye.prenom }}</span></div>
            <div class="info"><mat-icon>email</mat-icon> <span>{{ selectedEmploye.courriel }}</span></div>
          </ng-container>
          <ng-template #loadingEmploye><p>Chargement des infos employ√©...</p></ng-template>

          <mat-divider></mat-divider>

          <!-- üîπ R√©sum√© du projet -->
          <h3>R√©sum√©</h3>
          <p>{{ selectedProjet.resume }}</p>

          <mat-divider></mat-divider>

          <!-- üîπ Documents & Liens -->
          <h3>Documents</h3>
          <div class="info"><mat-icon>description</mat-icon> <a [href]="selectedProjet.lien_facture" target="_blank">Facture</a></div>
          <div class="info"><mat-icon>attach_file</mat-icon> <a [href]="selectedProjet.lien_soumision" target="_blank">Soumission</a></div>

          <mat-divider></mat-divider>

          <!-- üîπ Tags & Cat√©gories -->
          <h3>Cat√©gories & Tags</h3>
          <div class="info"><mat-icon>category</mat-icon> <span>{{ selectedProjet.categories }}</span></div>
          <div class="info"><mat-icon>label</mat-icon> <span>{{ selectedProjet.tags }}</span></div>

          <mat-divider></mat-divider>

          <!-- üîπ Localisation -->
          <h3>Localisation</h3>
          <div class="info"><mat-icon>map</mat-icon> <span>Municipalit√© : {{ selectedProjet.code_mun }}</span></div>
          <div class="info"><mat-icon>public</mat-icon> <span>R√©gion : {{ selectedProjet.code_egion }}</span></div>
          <div class="info"><mat-icon>flag</mat-icon> <span>Unit√© G√©ographique : {{ selectedProjet.unite_goe }}</span></div>

        </mat-card-content>
      </mat-card>
    </mat-sidenav-content>
  </mat-sidenav-container>




  <!-- <div class="projet-table">

    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource">

        <ng-container matColumnDef="id_projet">
          <th mat-header-cell *matHeaderCellDef> ID Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.id_projet}} </td>
        </ng-container>

        <ng-container matColumnDef="id_emloye">
          <th mat-header-cell *matHeaderCellDef> Employ√© ID </th>
          <td mat-cell *matCellDef="let element"> {{element.id_emloye}} </td>
        </ng-container>
        <ng-container matColumnDef="id_client">
          <th mat-header-cell *matHeaderCellDef> Client ID </th>
          <td mat-cell *matCellDef="let element"> {{element.id_client}} </td>
        </ng-container>

        <ng-container matColumnDef="nom_du_projet">
          <th mat-header-cell *matHeaderCellDef> Nom du Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.nom_du_projet}} </td>
        </ng-container>

        <ng-container matColumnDef="code_projet">
          <th mat-header-cell *matHeaderCellDef> Code Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.code_projet}} </td>
        </ng-container>
        <ng-container matColumnDef="code_etat_projet">
          <th mat-header-cell *matHeaderCellDef> Code Etat Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.code_etat_projet}} </td>
        </ng-container>
        <ng-container matColumnDef="detail_etat_projet">
          <th mat-header-cell *matHeaderCellDef> Detail Etat Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.detail_etat_projet}} </td>
        </ng-container>
        <ng-container matColumnDef="code_mun">
          <th mat-header-cell *matHeaderCellDef> Porjet Mun  </th>
          <td mat-cell *matCellDef="let element"> {{element.code_mun}} </td>
        </ng-container>
        <ng-container matColumnDef="type_projet">
          <th mat-header-cell *matHeaderCellDef>Type Projet</th>
          <td mat-cell *matCellDef="let element"> {{element.type_projet}} </td>
        </ng-container>
        <ng-container matColumnDef="code_mrc">
          <th mat-header-cell *matHeaderCellDef> Code MRC  </th>
          <td mat-cell *matCellDef="let element"> {{element.code_mrc}} </td>
        </ng-container>
        <ng-container matColumnDef="code_region">
          <th mat-header-cell *matHeaderCellDef> Code RE  </th>
        <td mat-cell *matCellDef="let element"> {{element.code_region}} </td>
        </ng-container>
        <ng-container matColumnDef="zgie">
          <th mat-header-cell *matHeaderCellDef> ZGIE  </th>
        <td mat-cell *matCellDef="let element"> {{element.zgie}} </td>
        </ng-container>
        <ng-container matColumnDef="unite_geo">
          <th mat-header-cell *matHeaderCellDef> Uit√© Geo  </th>
        <td mat-cell *matCellDef="let element"> {{element.unite_geo}} </td>
        </ng-container>

        <ng-container matColumnDef="statut">
          <th mat-header-cell *matHeaderCellDef> Statut </th>
          <td mat-cell *matCellDef="let element"> {{element.statut}} </td>
        </ng-container>
        <ng-container matColumnDef="carte_projet">
          <th mat-header-cell *matHeaderCellDef> Carte Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.carte_projet}} </td>
        </ng-container>
        <ng-container matColumnDef="identifiant">
          <th mat-header-cell *matHeaderCellDef>identifiant </th>
          <td mat-cell *matCellDef="let element"> {{element.identifiant}} </td>
        </ng-container>

        <ng-container matColumnDef="date_prevue">
          <th mat-header-cell *matHeaderCellDef> Date Pr√©vue </th>
          <td mat-cell *matCellDef="let element"> {{element.date_prevue}} </td>
        </ng-container>

        <ng-container matColumnDef="detail">
          <th mat-header-cell *matHeaderCellDef> D√©tail </th>
          <td mat-cell *matCellDef="let element"> {{element.detail}} </td>
        </ng-container>

        <ng-container matColumnDef="suivi">
          <th mat-header-cell *matHeaderCellDef> Suivi </th>
          <td mat-cell *matCellDef="let element"> {{element.suivi}} </td>
        </ng-container>
        <ng-container matColumnDef="facture">
          <th mat-header-cell *matHeaderCellDef>Facture </th>
          <td mat-cell *matCellDef="let element"> {{element.facture}} </td>
        </ng-container>
        <ng-container matColumnDef="lien_facture">
          <th mat-header-cell *matHeaderCellDef> Lien Facture </th>
          <td mat-cell *matCellDef="let element"> {{element.lien_facture}} </td>
        </ng-container>
        <ng-container matColumnDef="tags">
          <th mat-header-cell *matHeaderCellDef>Tags </th>
          <td mat-cell *matCellDef="let element"> {{element.tags}} </td>
        </ng-container>

        <ng-container matColumnDef="lien_soumission">
          <th mat-header-cell *matHeaderCellDef> Lien Soumission </th>
          <td mat-cell *matCellDef="let element"> {{element.len_soumission}} </td>
        </ng-container>
        <ng-container matColumnDef="montant_soumission">
          <th mat-header-cell *matHeaderCellDef> Montant Soumission </th>
          <td mat-cell *matCellDef="let element"> {{element.montant_soumission}} </td>
        </ng-container>

        <ng-container matColumnDef="date_debut">
          <th mat-header-cell *matHeaderCellDef> Date D√©but </th>
          <td mat-cell *matCellDef="let element"> {{element.date_debut | date:'yyyy-MM-dd'}} </td>
        </ng-container>

        <ng-container matColumnDef="date_fin">
          <th mat-header-cell *matHeaderCellDef> Date Fin </th>
          <td mat-cell *matCellDef="let element"> {{element.date_fin | date:'yyyy-MM-dd'}} </td>
        </ng-container>

        <ng-container matColumnDef="site_web">
          <th mat-header-cell *matHeaderCellDef> Site Web </th>
          <td mat-cell *matCellDef="let element"> {{element.site_web}} </td>
        </ng-container>

        <ng-container matColumnDef="resume">
          <th mat-header-cell *matHeaderCellDef> R√©sum√© </th>
          <td mat-cell *matCellDef="let element"> {{element.resume}} </td>
        </ng-container>
        <ng-container matColumnDef="etat_projet">
          <th mat-header-cell *matHeaderCellDef> Etat Projet </th>
          <td mat-cell *matCellDef="let element"> {{element.etat_projet}} </td>
        </ng-container>

        <ng-container matColumnDef="publication">
          <th mat-header-cell *matHeaderCellDef>Publication </th>
          <td mat-cell *matCellDef="let element"> {{element.publication}} </td>
        </ng-container>

        <ng-container matColumnDef="categories">
          <th mat-header-cell *matHeaderCellDef>Categorie </th>
          <td mat-cell *matCellDef="let element"> {{element.categories}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div> -->
